#include <stdio.h>
#include <stdint.h>
#include <time.h>
uint32_t *control = (uint32_t *) 0x40000000;
uint32_t *imArray = (uint32_t *) 0x40000004;
uint32_t *wgArray = (uint32_t *) 0x40000100;
uint32_t *rsArray = (uint32_t *) 0x400001c8;
int main() {
  // deactivate hardware processing
  *(control) = 0;
  // MARKER = SIGN
  // input image data to image "array"
  *(imArray + 0) = 50331648; // 3
  *(imArray + 1) = 16777216; // 1
  *(imArray + 2) = 33554432; // 2
  *(imArray + 3) = 0;
  *(imArray + 4) = 0;
  *(imArray + 5) = 0;
  *(imArray + 6) = 0;
  *(imArray + 7) = 0;
  *(imArray + 8) = 117440512; // 7
  *(imArray + 9) = 16777216; // 1
  *(imArray + 10) = 67108864; // 4
  *(imArray + 11) = 0;
  *(imArray + 12) = 0;
  *(imArray + 13) = 0;
  *(imArray + 14) = 0;
  *(imArray + 15) = 0;
  *(imArray + 16) = 0;
  *(imArray + 17) = 16777216; // 1
  *(imArray + 18) = 83886080; // 5
  *(imArray + 19) = 0;
  *(imArray + 20) = 0;
  *(imArray + 21) = 0;
  *(imArray + 22) = 0;
  *(imArray + 23) = 0;
  *(imArray + 24) = 0;
  *(imArray + 25) = 0;
  *(imArray + 26) = 0;
  *(imArray + 27) = 0;
  *(imArray + 28) = 0;
  *(imArray + 29) = 0;
  *(imArray + 30) = 0;
  *(imArray + 31) = 0;
  *(imArray + 32) = 0;
  *(imArray + 33) = 0;
  *(imArray + 34) = 0;
  *(imArray + 35) = 0;
  *(imArray + 36) = 0;
  *(imArray + 37) = 0;
  *(imArray + 38) = 0;
  *(imArray + 39) = 0;
  *(imArray + 40) = 0;
  *(imArray + 41) = 0;
  *(imArray + 42) = 0;
  *(imArray + 43) = 0;
  *(imArray + 44) = 0;
  *(imArray + 45) = 0;
  *(imArray + 46) = 0;
  *(imArray + 47) = 0;
  *(imArray + 48) = 0;
  *(imArray + 49) = 0;
  *(imArray + 50) = 0;
  *(imArray + 51) = 0;
  *(imArray + 52) = 0;
  *(imArray + 53) = 0;
  *(imArray + 54) = 0;
  *(imArray + 55) = 0;
  *(imArray + 56) = 0;
  *(imArray + 57) = 0;
  *(imArray + 58) = 0;
  *(imArray + 59) = 0;
  *(imArray + 60) = 0;
  *(imArray + 61) = 0;
  *(imArray + 62) = 0;
  *(imArray + 63) = 0;
  // input weight data to weight "array"
  *(wgArray + 0) = 33554432; // 2
  *(wgArray + 1) = 67108864; // 4
  *(wgArray + 2) = 0;
  *(wgArray + 3) = 0;
  *(wgArray + 4) = 0;
  *(wgArray + 5) = 0;
  *(wgArray + 6) = 0;
  *(wgArray + 7) = 16777216; // 1
  *(wgArray + 8) = 33554432; // 2
  *(wgArray + 9) = 0;
  *(wgArray + 10) = 0;
  *(wgArray + 11) = 0;
  *(wgArray + 12) = 0;
  *(wgArray + 13) = 0;
  *(wgArray + 14) = 0;
  *(wgArray + 15) = 0;
  *(wgArray + 16) = 0;
  *(wgArray + 17) = 0;
  *(wgArray + 18) = 0;
  *(wgArray + 19) = 0;
  *(wgArray + 20) = 0;
  *(wgArray + 21) = 0;
  *(wgArray + 22) = 0;
  *(wgArray + 23) = 0;
  *(wgArray + 24) = 0;
  *(wgArray + 25) = 0;
  *(wgArray + 26) = 0;
  *(wgArray + 27) = 0;
  *(wgArray + 28) = 0;
  *(wgArray + 29) = 0;
  *(wgArray + 30) = 0;
  *(wgArray + 31) = 0;
  *(wgArray + 32) = 0;
  *(wgArray + 33) = 0;
  *(wgArray + 34) = 0;
  *(wgArray + 35) = 0;
  *(wgArray + 36) = 0;
  *(wgArray + 37) = 0;
  *(wgArray + 38) = 0;
  *(wgArray + 39) = 0;
  *(wgArray + 40) = 0;
  *(wgArray + 41) = 0;
  *(wgArray + 42) = 0;
  *(wgArray + 43) = 0;
  *(wgArray + 44) = 0;
  *(wgArray + 45) = 0;
  *(wgArray + 46) = 0;
  *(wgArray + 47) = 0;
  *(wgArray + 48) = 0;
  // activate hardware processing
  *(control) = 0xffffffff;
  // sleep while hardware is processing, time slept given for the hardware is 120% of hardware processing time
  nanosleep((const struct timespec[]){{0, 240L}}, NULL);
  // deactivate hardware processing
  *(control) = 0;
  printf("%d\n", *(rsArray + 0));
  printf("%d\n", *(rsArray + 1));
  printf("%d\n", *(rsArray + 2));
  printf("%d\n", *(rsArray + 3));
  printf("%d\n", *(rsArray + 4));
  printf("%d\n", *(rsArray + 5));
  printf("%d\n", *(rsArray + 6));
  printf("%d\n", *(rsArray + 7));
  printf("%d\n", *(rsArray + 8));
  printf("%d\n", *(rsArray + 9));
  printf("%d\n", *(rsArray + 10));
  printf("%d\n", *(rsArray + 11));
  printf("%d\n", *(rsArray + 12));
  printf("%d\n", *(rsArray + 13));
  printf("%d\n", *(rsArray + 14));
  printf("%d\n", *(rsArray + 15));
  printf("%d\n", *(rsArray + 16));
  printf("%d\n", *(rsArray + 17));
  printf("%d\n", *(rsArray + 18));
  printf("%d\n", *(rsArray + 19));
  printf("%d\n", *(rsArray + 20));
  printf("%d\n", *(rsArray + 21));
  printf("%d\n", *(rsArray + 22));
  printf("%d\n", *(rsArray + 23));
  printf("%d\n", *(rsArray + 24));
  printf("%d\n", *(rsArray + 25));
  printf("%d\n", *(rsArray + 26));
  printf("%d\n", *(rsArray + 27));
  printf("%d\n", *(rsArray + 28));
  printf("%d\n", *(rsArray + 29));
  printf("%d\n", *(rsArray + 30));
  printf("%d\n", *(rsArray + 31));
  printf("%d\n", *(rsArray + 32));
  printf("%d\n", *(rsArray + 33));
  printf("%d\n", *(rsArray + 34));
  printf("%d\n", *(rsArray + 35));
  printf("%d\n", *(rsArray + 36));
  printf("%d\n", *(rsArray + 37));
  printf("%d\n", *(rsArray + 38));
  printf("%d\n", *(rsArray + 39));
  printf("%d\n", *(rsArray + 40));
  printf("%d\n", *(rsArray + 41));
  printf("%d\n", *(rsArray + 42));
  printf("%d\n", *(rsArray + 43));
  printf("%d\n", *(rsArray + 44));
  printf("%d\n", *(rsArray + 45));
  printf("%d\n", *(rsArray + 46));
  printf("%d\n", *(rsArray + 47));
  printf("%d\n", *(rsArray + 48));
  printf("%d\n", *(rsArray + 49));
  printf("%d\n", *(rsArray + 50));
  printf("%d\n", *(rsArray + 51));
  printf("%d\n", *(rsArray + 52));
  printf("%d\n", *(rsArray + 53));
  printf("%d\n", *(rsArray + 54));
  printf("%d\n", *(rsArray + 55));
  printf("%d\n", *(rsArray + 56));
  printf("%d\n", *(rsArray + 57));
  printf("%d\n", *(rsArray + 58));
  printf("%d\n", *(rsArray + 59));
  printf("%d\n", *(rsArray + 60));
  printf("%d\n", *(rsArray + 61));
  printf("%d\n", *(rsArray + 62));
  printf("%d\n", *(rsArray + 63));
  // MARKER = REPEAT from SIGN ad infinitum
}
